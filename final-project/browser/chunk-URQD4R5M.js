import{a as z,b as se,c as de,d as Ce,e as fe,f as he,g as xe,h as be}from"./chunk-ZBYAMNIA.js";import{Ad as Se,Ba as f,Ea as P,Ha as S,La as a,Lb as L,Ma as o,Mc as N,Na as h,Nc as B,Pc as J,Ra as g,S as W,Tc as Q,Ua as x,Uc as X,Wa as s,X as u,Xc as Y,Y as _,Yb as H,Yc as Z,Za as b,a as k,ac as U,cd as $,db as V,eb as d,ed as ee,fb as F,fc as G,fd as te,gb as v,gd as ie,hb as E,ib as j,id as ne,jb as w,jd as oe,kb as T,kc as K,kd as re,lb as M,ld as ae,ma as r,mb as q,mc as O,md as le,na as y,nb as A,nd as ce,ob as I,rd as pe,sd as me,tb as p,td as ue,ub as m,ud as _e,wd as ge,za as C,zd as ve}from"./chunk-IQVSDNRZ.js";var we=()=>["name","phoneNumber"],Te=()=>({"min-width":"75rem"}),ye=()=>({width:"450px"});function Me(e,c){if(e&1){let n=g();a(0,"p-button",11),p(1,"translate"),x("click",function(){u(n);let t=s(2);return _(t.openNew())}),o()}e&2&&b("label",m(1,1,"New"))}function Ie(e,c){e&1&&(a(0,"p-toolbar",4),C(1,Me,2,3,"ng-template",10),o())}function Ve(e,c){if(e&1){let n=g();a(0,"div",12)(1,"h5",13),d(2),p(3,"translate"),p(4,"translate"),o(),a(5,"span",14),h(6,"i",15),a(7,"input",16),p(8,"translate"),x("input",function(t){u(n),s();let l=V(4);return _(l.filterGlobal(t.target.value,"contains"))}),o()()()}e&2&&(r(2),E("",m(3,3,"Manage")," ",m(4,5,"Contractors"),""),r(5),b("placeholder",m(8,7,"Search")))}function Ee(e,c){e&1&&(a(0,"tr")(1,"th",17),d(2),p(3,"translate"),h(4,"p-sortIcon",18),o(),a(5,"th",19),d(6),p(7,"translate"),h(8,"p-sortIcon",20),o(),a(9,"th",21),d(10),p(11,"translate"),h(12,"p-sortIcon",22),o()()),e&2&&(r(2),v(" ",m(3,3,"Id")," "),r(4),v(" ",m(7,5,"Name")," "),r(4),v(" ",m(11,7,"PhoneNumber")," "))}function Ne(e,c){if(e&1){let n=g();a(0,"td")(1,"p-button",23),x("click",function(){u(n);let t=s().$implicit,l=s();return _(l.editContractor(t))}),o(),a(2,"p-button",24),x("click",function(){u(n);let t=s().$implicit,l=s();return _(l.deleteContractor(t))}),o()()}e&2&&(r(),f("rounded",!0)("outlined",!0),r(),f("rounded",!0)("outlined",!0))}function Be(e,c){if(e&1&&(a(0,"tr")(1,"td"),d(2),o(),a(3,"td"),d(4),o(),a(5,"td"),d(6),o(),C(7,Ne,3,4,"td"),o()),e&2){let n=c.$implicit,i=s();r(2),v(" ",n.id," "),r(2),v(" ",n.name," "),r(2),v(" ",n.phoneNumber," "),r(),S(7,i.authService.isRole("Administrator")||i.authService.isRole("Projects")||i.authService.isRole("Contractor")?7:-1)}}function De(e,c){if(e&1&&(a(0,"div",12),d(1),p(2,"translate"),p(3,"translate"),o()),e&2){let n=s();r(),j(" ",m(2,3,"InTotal")," ",n.contractors?n.contractors.length:0," ",m(3,5,"Contractors"),". ")}}function Re(e,c){e&1&&(a(0,"small",31),d(1),p(2,"translate"),p(3,"translate"),o()),e&2&&(r(),E(" ",m(2,2,"Name")," ",m(3,4,"isRequired")," "))}function ke(e,c){e&1&&(a(0,"small",31),d(1),p(2,"translate"),p(3,"translate"),o()),e&2&&(r(),E(" ",m(2,2,"PhoneNumber")," ",m(3,4,"isRequired"),". "))}function Pe(e,c){if(e&1){let n=g();a(0,"div",28)(1,"label",29),d(2),p(3,"translate"),o(),a(4,"input",30,1),M("ngModelChange",function(t){u(n);let l=s(2);return T(l.contractor.name,t)||(l.contractor.name=t),_(t)}),o(),C(6,Re,4,6,"small",31),o(),a(7,"div",28)(8,"label",32),d(9),p(10,"translate"),o(),a(11,"input",33,2),M("ngModelChange",function(t){u(n);let l=s(2);return T(l.contractor.phoneNumber,t)||(l.contractor.phoneNumber=t),_(t)}),o(),C(13,ke,4,6,"small",31),o()}if(e&2){let n=V(5),i=V(12),t=s(2);r(2),F(m(3,6,"Name")),r(2),w("ngModel",t.contractor.name),r(2),S(6,!(n==null||n.errors==null)&&n.errors.required&&n.dirty?6:-1),r(3),F(m(10,8,"PhoneNumber")),r(2),w("ngModel",t.contractor.phoneNumber),r(2),S(13,!(i==null||i.errors==null)&&i.errors.required&&i.dirty?13:-1)}}function Fe(e,c){if(e&1){let n=g();a(0,"p-button",34),p(1,"translate"),x("click",function(){u(n);let t=s(2);return _(t.hideDialog())}),o(),a(2,"p-button",35),p(3,"translate"),x("click",function(){u(n);let t=s(2);return _(t.saveContractor())}),o()}e&2&&(b("label",m(1,4,"Cancel")),f("text",!0),r(2),b("label",m(3,6,"Save")),f("text",!0))}function We(e,c){if(e&1){let n=g();a(0,"p-dialog",25),p(1,"translate"),M("visibleChange",function(t){u(n);let l=s();return T(l.contractorDialog,t)||(l.contractorDialog=t),_(t)}),C(2,Pe,14,10,"ng-template",26)(3,Fe,4,8,"ng-template",27),o(),h(4,"p-confirmDialog")}if(e&2){let n=s();P(I(9,ye)),b("header",m(1,7,"ContractorDetails")),w("visible",n.contractorDialog),f("modal",!0),r(4),P(I(10,ye))}}var ht=(()=>{let c=class c{constructor(i,t,l,D){this.contractorService=i,this.messageService=t,this.confirmationService=l,this.authService=D,this.contractorDialog=!1}ngOnInit(){this.contractorService.getContractors().subscribe(i=>this.contractors=i)}openNew(){this.contractor={name:"",id:""},this.contractorDialog=!0}editContractor(i){this.contractor=k({},i),this.contractorDialog=!0}deleteContractor(i){this.contractor=k({},i),this.confirmationService.confirm({message:"Are you sure you want to delete "+i.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.contractorService.deleteContractor(this.contractor.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"Contractor Deleted",life:3e3}),this.hideDialog()})}})}hideDialog(){this.contractorDialog=!1,this.contractorService.getContractors().subscribe(i=>this.contractors=i)}saveContractor(){this.contractor.name?.trim()&&(this.contractor.id?(console.log(this.contractor),this.contractorService.updateContractor(this.contractor,this.contractor.id).subscribe(i=>{console.log(i),this.hideDialog(),this.messageService.add({severity:"success",summary:"Successful",detail:"Contractor Updated",life:3e3})})):(this.contractor.name=this.contractor.name,this.contractorService.addContractor(this.contractor).subscribe(i=>{console.log(i),this.hideDialog(),this.messageService.add({severity:"success",summary:"Successful",detail:"Contractor Added",life:3e3})})))}};c.\u0275fac=function(t){return new(t||c)(y(be),y(B),y(N),y(z))},c.\u0275cmp=W({type:c,selectors:[["fn-contractor"]],standalone:!0,features:[q([B,N]),A],decls:10,vars:12,consts:[["dt",""],["name","ngModel"],["phoneNumber","ngModel"],[1,"card"],["styleClass","mb-4 gap-2"],["dataKey","id",3,"selectionChange","value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","left"],["pRipple","","severity","success","icon","pi pi-plus",1,"mr-2",3,"click","label"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",3,"input","placeholder"],["pSortableColumn","id",2,"min-width","15rem"],["field","id"],["pSortableColumn","name",2,"min-width","15rem"],["field","name"],["pSortableColumn","phoneNumber"],["field","phoneNumber"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],["styleClass","p-fluid",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[1,"field"],["for","contractorName"],["type","text","pInputText","","id","contractorName","name","name","required","",3,"ngModelChange","ngModel"],[1,"p-error"],["for","phoneNumber"],["type","text","pInputText","","id","phoneNumber","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["pRipple","","icon","pi pi-times",3,"click","label","text"],["pRipple","","icon","pi pi-check",3,"click","label","text"]],template:function(t,l){if(t&1){let D=g();a(0,"div",3),h(1,"p-toast"),C(2,Ie,2,0,"p-toolbar",4),a(3,"p-table",5,0),M("selectionChange",function(R){return u(D),T(l.selectedContractors,R)||(l.selectedContractors=R),_(R)}),C(5,Ve,9,9,"ng-template",6)(6,Ee,13,9,"ng-template",7)(7,Be,8,4,"ng-template",8)(8,De,4,7,"ng-template",9),o(),C(9,We,5,11),o()}t&2&&(r(2),S(2,l.authService.isRole("Administrator")||l.authService.isRole("Projects")||l.authService.isRole("Contractor")?2:-1),r(),f("value",l.contractors)("rows",10)("paginator",!0)("globalFilterFields",I(10,we))("tableStyle",I(11,Te)),w("selection",l.selectedContractors),f("rowHover",!0)("showCurrentPageReport",!0),r(6),S(9,l.authService.isRole("Administrator")?9:-1))},dependencies:[ae,ne,J,oe,re,ce,le,X,Q,Z,Y,me,pe,de,se,_e,ue,te,ee,Ce,L,fe,$,ge,he,xe,O,H,U,K,G,ie,Se,ve]});let e=c;return e})();export{ht as ContractorComponent};
