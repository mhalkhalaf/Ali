import{Y as Fe,Z as Be}from"./chunk-K6DBUO53.js";import{$c as Y,Aa as C,Ad as Ve,Ba as c,Ea as B,Eb as z,Ha as O,Hb as G,Jc as Z,K as X,Kc as V,L as I,La as s,Lb as h,Ma as i,Mc as q,N as ee,Na as u,Nb as ne,Nc as Q,Pc as U,Qc as x,Ra as H,S as g,T as b,Ua as T,Uc as fe,Wa as D,Wc as he,X as M,Xa as K,Xc as _e,Y as P,Ya as R,Yb as oe,Yc as W,Za as k,Zc as Ie,_b as A,a as S,ac as se,bc as re,bd as ge,cc as ae,cd as be,eb as m,ec as j,ed as ye,fb as E,fd as ve,gb as L,gc as le,hb as N,hd as xe,ic as ue,id as Ce,jc as pe,jd as Te,kd as we,lc as de,ld as Se,ma as n,mb as te,mc as ce,na as y,nb as ie,nc as me,nd as Me,ob as $,sd as Pe,tb as p,td as De,ub as d,ud as ke,wd as Ee,yd as Le,za as v,zd as Ae}from"./chunk-IQVSDNRZ.js";var Ge=["*"],Oe=(()=>{class e{style;styleClass;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["p-inputGroup"]],hostAttrs:[1,"p-element","p-inputgroup"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:Ge,decls:2,vars:3,consts:[[1,"p-inputgroup",3,"ngClass","ngStyle"]],template:function(t,o){t&1&&(K(),s(0,"div",0),R(1),i()),t&2&&(c("ngClass",o.styleClass)("ngStyle",o.style),C("data-pc-name","inputgroup"))},dependencies:[z,G],encapsulation:2})}return e})(),He=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=b({type:e});static \u0275inj=I({imports:[h,x]})}return e})();var qe=["*"],Ke=(()=>{class e{style;styleClass;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["p-inputGroupAddon"]],hostAttrs:[1,"p-element","p-inputgroup-addon"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:qe,decls:2,vars:3,consts:[[3,"ngClass","ngStyle"]],template:function(t,o){t&1&&(K(),s(0,"div",0),R(1),i()),t&2&&(c("ngClass",o.styleClass)("ngStyle",o.style),C("data-pc-name","inputgroupaddon"))},dependencies:[z,G],encapsulation:2})}return e})(),Re=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=b({type:e});static \u0275inj=I({imports:[h,x]})}return e})();var J=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=b({type:e});static \u0275inj=I({imports:[h,Z,fe,Y,xe,x,Z,Y,x]})}return e})();var Ne=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=b({type:e});static \u0275inj=I({imports:[h,W,J,he,Ie,W,J]})}return e})();var $e=(()=>{let r=class r{constructor(t){this.httpClient=t}getAccounts(){return this.httpClient.get(`${V.apiUrl}/Accounts`)}addAccount(t){return this.httpClient.post(`${V.apiUrl}/Accounts`,t)}updateAccount(t,o){return this.httpClient.put(`${V.apiUrl}/Accounts/${t}`,o)}deleteAccount(t){return this.httpClient.delete(`${V.apiUrl}/Accounts/${t}`)}};r.\u0275fac=function(o){return new(o||r)(ee(ne))},r.\u0275prov=X({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();var rt=()=>({"min-width":"30rem"}),at=()=>({width:"450px"});function lt(e,r){e&1&&(s(0,"span",5),m(1),p(2,"translate"),p(3,"translate"),i()),e&2&&(n(),N("",d(2,2,"Username")," ",d(3,4,"isRequired"),""))}function ut(e,r){e&1&&(s(0,"span",8),m(1),p(2,"translate"),p(3,"translate"),i()),e&2&&(n(),N("",d(2,2,"Password")," ",d(3,4,"isRequired"),""))}function pt(e,r){e&1&&(s(0,"span",8),m(1),p(2,"translate"),i()),e&2&&(n(),E(d(2,1,"The length of the password must be more than 8 characters")))}function dt(e,r){e&1&&(s(0,"span",5),m(1),p(2,"translate"),p(3,"translate"),i()),e&2&&(n(),N("",d(2,2,"Username")," ",d(3,4,"isRequired"),""))}function ct(e,r){e&1&&(s(0,"tr")(1,"th",15),m(2),p(3,"translate"),u(4,"p-sortIcon",16),i(),s(5,"th",17),m(6),p(7,"translate"),u(8,"p-sortIcon",18),i(),s(9,"th",19),m(10),p(11,"translate"),u(12,"p-sortIcon",20),i()()),e&2&&(n(2),L(" ",d(3,3,"Username")," "),n(4),L(" ",d(7,5,"Password")," "),n(4),L(" ",d(11,7,"Role")," "))}function mt(e,r){if(e&1){let l=H();s(0,"tr")(1,"td"),m(2),i(),s(3,"td"),u(4,"input",21),i(),s(5,"td"),m(6),i(),s(7,"td")(8,"p-button",22),T("click",function(){let o=M(l).$implicit,a=D();return P(a.Edit(o))}),i(),s(9,"p-button",23),T("click",function(){let o=M(l).$implicit,a=D();return P(a.Delete(o))}),i()()()}if(e&2){let l=r.$implicit;n(2),E(l.username),n(2),k("value",l.password),n(2),E(l.role),n(2),c("rounded",!0)("outlined",!0),n(),c("rounded",!0)("outlined",!0)}}var _i=(()=>{let r=class r{constructor(t,o,a,_,f){this.accountService=t,this.fb=o,this.messageService=a,this.confirmationService=_,this.tranlate=f}ngOnInit(){this.Account$=this.accountService.getAccounts().subscribe(t=>this.accounts=t),this.form=new ae({username:new j,password:new j,role:new j}),this.form=this.fb.group({username:["",A.required],password:["",[A.required,A.minLength(8)]],role:["",A.required]}),this.statuses=["Administrator","Contractors","Engineers","Projects","User"]}Save(){this.account?this.account.username?.trim()&&this.account.id&&(console.log(this.account),this.account.id=this.account.id,this.account.username=this.form.get("username")?.value,this.account.password=this.form.get("password")?.value,this.account.role=this.form.get("role")?.value,this.accountService.updateAccount(this.account.id,this.account).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"Coordibator Updated",life:3e3})}),this.Account$=this.accountService.getAccounts().subscribe(t=>this.accounts=t)):this.accountService.addAccount(this.form.value).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"Coordibator Added",life:3e3})})}Edit(t){this.account=S({},t),this.form.setValue({username:t.username,password:t.password,role:t.role})}Delete(t){this.account=S({},t),this.confirmationService.confirm({message:"Are you sure you want to delete "+t.username+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.accountService.deleteAccount(this.account.id).subscribe(o=>{console.log(o),this.messageService.add({severity:"danger",summary:"Successful",detail:"Coordibator Deleted",life:3e3})}),this.Account$=this.accountService.getAccounts().subscribe(o=>this.accounts=o)}})}};r.\u0275fac=function(o){return new(o||r)(y($e),y(de),y(Q),y(q),y(Le))},r.\u0275cmp=g({type:r,selectors:[["fn-account-details"]],standalone:!0,features:[te([Q,q]),ie],decls:25,vars:21,consts:[[1,"card","flex","md:flex-row","gap-3"],[1,"col-xl-3","col-l-8",3,"ngSubmit","formGroup"],[1,"py-3"],[1,"pi","pi-user"],["pInputText","","formControlName","username",3,"placeholder"],[1,"text-danger"],[1,"pi","pi-lock"],["pInputText","","type","password","formControlName","password","name","password",3,"placeholder"],[1,"text-danger","d-block"],["formControlName","role","placeholder","Select a Role",1,"py-3",3,"options","editable"],[1,"col-xl-3","align-self-center"],["icon","pi pi-check","type","submit",1,"mt-3",3,"label"],[1,"col-xl-6","col-l-8","ms-5",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","username",2,"width","20%"],["field","username"],["pSortableColumn","password",2,"width","20%"],["field","password"],["pSortableColumn","role",2,"width","10%"],["field","role"],["type","password","disabled","",1,"boder","border-0","bg-transparent",3,"value"],["pRipple","","icon","pi pi-pencil","severity","success",1,"mr-2",3,"click","rounded","outlined"],["pRipple","","icon","pi pi-trash","severity","danger","severity","danger",3,"click","rounded","outlined"]],template:function(o,a){if(o&1&&(s(0,"div",0)(1,"form",1),T("ngSubmit",function(){return a.Save()}),s(2,"div")(3,"p-inputGroup",2)(4,"p-inputGroupAddon"),u(5,"i",3),i(),u(6,"input",4),p(7,"translate"),i(),v(8,lt,4,6,"span",5),s(9,"p-inputGroup",2)(10,"p-inputGroupAddon"),u(11,"i",6),i(),u(12,"input",7),p(13,"translate"),i(),v(14,ut,4,6,"span",8)(15,pt,3,3),u(16,"p-dropdown",9),v(17,dt,4,6,"span",5),i(),s(18,"div",10),u(19,"p-button",11),p(20,"translate"),i()(),s(21,"p-table",12),v(22,ct,13,9,"ng-template",13)(23,mt,10,7,"ng-template",14),i(),u(24,"p-confirmDialog"),i()),o&2){let _,f,w;n(),c("formGroup",a.form),n(5),k("placeholder",d(7,13,"Username")),n(2),O(8,!((_=a.form.get("username"))==null||_.errors==null)&&_.errors.required&&((_=a.form.get("username"))!=null&&_.dirty)?8:-1),n(4),k("placeholder",d(13,15,"Password")),n(2),O(14,!((f=a.form.get("password"))==null||f.errors==null)&&f.errors.required&&((f=a.form.get("password"))!=null&&f.dirty)?14:!((f=a.form.get("password"))==null||f.errors==null)&&f.errors.minlength?15:-1),n(2),c("options",a.statuses)("editable",!0),n(),O(17,!((w=a.form.get("role"))==null||w.errors==null)&&w.errors.required&&((w=a.form.get("role"))!=null&&w.dirty)?17:-1),n(2),k("label",d(20,17,"Add")),n(2),c("value",a.accounts)("tableStyle",$(19,rt)),n(3),B($(20,at))}},dependencies:[ce,le,oe,se,re,He,Oe,U,Re,Ke,ve,ye,Ee,be,ge,Ne,_e,Pe,Fe,Be,Se,Ce,Te,we,me,ue,pe,h,ke,De,Me,Ve,Ae]});let e=r;return e})();export{_i as AccountDetailsComponent};
